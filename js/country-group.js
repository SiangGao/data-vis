Chart.plugins.unregister(ChartDataLabels);
const ctx1 = document.getElementById('country-group-canvas1').getContext('2d');
const ctx2 = document.getElementById('country-group-canvas2').getContext('2d');

// Data source for bar chart
const group_cnt = [
    ['Taliban', 'ISIL', 'SL', 'FMLN', 'Al-Shabaab', "NPA", 'IRA', 'FARC', 'Boko Haram', "PKK"],
    [7478, 5613, 4555, 3351, 3288, 2772, 2671, 2487, 2418, 2310],
    ['Taliban', 'Islamic State of Iraq and the Levant (ISIL)', 'Shining Path (SL)', 'Farabundo Marti National Liberation Front (FMLN)', 'Al-Shabaab', "New People's Army (NPA)", 'Irish Republican Army (IRA)', 'Revolutionary Armed Forces of Colombia (FARC)', 'Boko Haram', "Kurdistan Workers' Party (PKK)"],
]
const group_death = [
    ['ISIL', 'Taliban', 'Boko Haram', 'SL', 'LTTE', 'Al-Shabaab', 'FMLN', 'FDN', 'TTP', 'FARC'],
    [38923, 29410, 20328, 11601, 10989, 9330, 8065, 6662, 6042, 5661],
    ['Islamic State of Iraq and the Levant (ISIL)', 'Taliban', 'Boko Haram', 'Shining Path (SL)', 'Liberation Tigers of Tamil Eelam (LTTE)', 'Al-Shabaab', 'Farabundo Marti National Liberation Front (FMLN)', 'Nicaraguan Democratic Force (FDN)', 'Tehrik-i-Taliban Pakistan (TTP)', 'Revolutionary Armed Forces of Colombia (FARC)'],
]
const country_cnt = [
    ['Iraq', 'Pakistan', 'Afghanistan', 'India', 'Colombia', 'Philippines', 'Peru', 'El Salvador', 'United Kingdom', 'Turkey'],
    [24636, 14368, 12731, 11960,  8306,  6908,  6096,  5320,  5235, 4292],
    ['Iraq', 'Pakistan', 'Afghanistan', 'India', 'Colombia', 'Philippines', 'Peru', 'El Salvador', 'United Kingdom', 'Turkey'],
]
const country_death = [
    ['Iraq', 'Afghanistan', 'Pakistan', 'Nigeria', 'India', 'Sri Lanka', 'Syria', 'Colombia', 'Peru', 'El Salvador'],
    [78589, 39384, 23822, 22682, 19341, 15530, 15229, 14698, 12771, 12053],
    ['Iraq', 'Afghanistan', 'Pakistan', 'Nigeria', 'India', 'Sri Lanka', 'Syria', 'Colombia', 'Peru', 'El Salvador'],
]

// Data source for line chart
const year_death_by_country = 
{'Iraq': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 12, 0, 0, 1, 8, 0, 96, 1, 0, 0, 0, 0, 43, 0, 0, 1, 117, 0, 75, 156, 11, 106, 19, 32, 10, 9, 10, 391, 2171, 3384, 4616, 6667, 2864, 2585, 2074, 1870, 2686, 7041, 13965, 8885, 12207, 6476]], 'Afghanistan': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 
1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 0, 53, 0, 0, 0, 0, 0, 0, 0, 0, 128, 10, 12, 68, 49, 0, 22, 5, 31, 4, 8, 39, 38, 174, 74, 163, 275, 367, 732, 1199, 1092, 1065, 1157, 1525, 3521, 3709, 5414, 6216, 6142, 6092]], 'Pakistan': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [4, 0, 0, 0, 0, 1, 
1, 0, 5, 6, 17, 4, 3, 10, 12, 0, 60, 183, 136, 56, 188, 231, 152, 0, 354, 712, 423, 443, 151, 127, 118, 109, 105, 119, 304, 152, 315, 1406, 1184, 1487, 1699, 1676, 2784, 2875, 2413, 1608, 1113, 1076]], 'Nigeria': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 4, 0, 0, 10, 135, 0, 15, 1, 24, 107, 9, 134, 0, 3, 28, 28, 41, 19, 254, 82, 72, 316, 117, 447, 1508, 2014, 7781, 5559, 2165, 1805]], 'India': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 4, 0, 0, 0, 31, 17, 24, 64, 59, 195, 51, 340, 506, 966, 874, 907, 1113, 1152, 0, 389, 361, 569, 853, 398, 469, 671, 660, 599, 472, 334, 466, 722, 626, 824, 774, 812, 499, 264, 467, 490, 387, 467, 465]], 'Sri Lanka': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 3, 7, 6, 485, 611, 690, 1274, 885, 1822, 1505, 1034, 984, 0, 186, 1020, 827, 486, 680, 212, 449, 195, 3, 23, 30, 125, 1012, 410, 353, 201, 2, 0, 0, 0, 3, 3, 0, 1]], 'Syria': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 
2017], [0, 0, 0, 0, 1, 0, 5, 1, 0, 80, 89, 192, 98, 1, 0, 30, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 2, 0, 0, 0, 0, 0, 0, 4, 0, 5, 0, 18, 0, 0, 163, 877, 1568, 3312, 3924, 2810, 2026]], 'Colombia': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 1, 0, 0, 7, 10, 38, 71, 156, 159, 365, 368, 437, 485, 935, 771, 655, 1096, 751, 694, 742, 631, 0, 218, 521, 611, 1230, 592, 262, 426, 576, 356, 184, 83, 145, 79, 64, 85, 107, 56, 43, 168, 137, 143, 104, 52, 84]], 'Peru': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 2, 10, 243, 1818, 2467, 729, 513, 773, 855, 1502, 1146, 1412, 818, 0, 81, 103, 74, 47, 7, 28, 4, 16, 9, 7, 6, 7, 7, 18, 0, 19, 0, 0, 10, 6, 4, 6, 11, 8]], 'El Salvador': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 
1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 2, 3, 4, 33, 286, 2383, 1578, 1549, 1667, 1315, 1013, 293, 421, 361, 350, 294, 426, 23, 0, 22, 3, 26, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]};

const year_death_by_group = 
{'Islamic State of Iraq and the Levant (ISIL)': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1458, 10261, 8461, 11690, 7053]], 'Taliban': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 153, 5, 86, 192, 293, 477, 747, 753, 683, 712, 815, 2568, 2747, 4115, 5220, 5030, 4814]], 'Boko Haram': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 304, 72, 327, 1256, 1729, 7118, 6510, 1468, 1544]], 'Shining Path (SL)': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 1, 7, 219, 1776, 2412, 708, 439, 716, 839, 1294, 1045, 1028, 728, 0, 55, 99, 47, 39, 4, 28, 4, 16, 9, 7, 4, 3, 7, 12, 0, 19, 0, 0, 5, 6, 4, 3, 10, 3]], 'Liberation Tigers of Tamil Eelam (LTTE)': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 13, 170, 133, 826, 538, 546, 1327, 1041, 927, 0, 171, 993, 802, 473, 680, 205, 342, 165, 3, 23, 24, 75, 684, 405, 276, 144, 0, 0, 0, 0, 0, 0, 0, 0]], 'Al-Shabaab': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 
1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 135, 112, 240, 206, 294, 710, 751, 1789, 1646, 1564, 1883]], 'Farabundo Marti National Liberation Front (FMLN)': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 564, 494, 1097, 1602, 1253, 985, 282, 388, 368, 324, 279, 425, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]], 'Nicaraguan Democratic Force (FDN)': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 
1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2101, 2582, 1389, 347, 243, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]], 'Tehrik-i-Taliban Pakistan (TTP)': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 14, 324, 658, 866, 655, 1003, 687, 784, 365, 337, 349]], 'Revolutionary Armed Forces of Colombia (FARC)': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 
1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 2, 0, 28, 43, 105, 55, 163, 168, 262, 150, 196, 113, 213, 312, 97, 94, 284, 256, 0, 90, 151, 218, 255, 444, 167, 256, 133, 335, 132, 65, 131, 59, 55, 34, 95, 53, 40, 159, 106, 88, 48, 6, 0]]};

const year_cnt_by_country = 
{'Iraq': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 1, 3, 0, 0, 2, 6, 3, 5, 3, 2, 0, 0, 3, 4, 4, 0, 3, 35, 0, 18, 17, 12, 21, 7, 12, 10, 3, 6, 102, 323, 617, 838, 1047, 1106, 1137, 1179, 1308, 1437, 2852, 3933, 2751, 3360, 2466]], 'Pakistan': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [1, 0, 0, 0, 2, 2, 3, 0, 2, 7, 1, 4, 4, 9, 3, 2, 24, 60, 44, 45, 87, 150, 85, 0, 154, 666, 180, 206, 37, 39, 49, 53, 46, 29, 67, 77, 164, 260, 568, 667, 713, 1012, 1654, 2215, 2151, 1243, 864, 719]], 'Afghanistan': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 1, 0, 0, 0, 0, 0, 3, 0, 
0, 0, 0, 0, 0, 0, 1, 11, 10, 2, 30, 36, 0, 9, 6, 4, 1, 1, 9, 14, 14, 38, 100, 88, 155, 282, 341, 414, 503, 542, 421, 1469, 1443, 1824, 1928, 1617, 1414]], 'India': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 1, 0, 0, 1, 1, 1, 0, 20, 10, 16, 13, 47, 159, 39, 96, 166, 358, 324, 349, 339, 237, 0, 107, 179, 213, 193, 61, 112, 180, 234, 184, 196, 108, 146, 167, 149, 534, 672, 663, 645, 611, 694, 860, 884, 1025, 966]], 'Colombia': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [1, 0, 2, 6, 0, 10, 22, 80, 158, 140, 141, 172, 222, 234, 237, 382, 307, 337, 427, 492, 349, 420, 523, 0, 201, 123, 409, 598, 94, 116, 137, 207, 150, 98, 37, 42, 43, 30, 133, 139, 136, 94, 115, 149, 231, 136, 109, 117]], 'Philippines': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 
1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [10, 4, 7, 0, 1, 4, 10, 2, 36, 50, 60, 31, 38, 16, 43, 124, 
80, 160, 210, 156, 320, 162, 162, 0, 72, 63, 61, 57, 18, 31, 132, 50, 48, 107, 32, 25, 58, 65, 276, 229, 205, 151, 249, 651, 597, 721, 632, 692]], 'Peru': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 
1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], 
[0, 0, 0, 3, 3, 2, 0, 4, 4, 3, 64, 149, 350, 536, 592, 352, 568, 627, 355, 630, 495, 658, 383, 0, 91, 44, 42, 58, 5, 5, 3, 3, 2, 1, 3, 2, 1, 4, 1, 4, 0, 0, 6, 10, 12, 10, 3, 8]], 'El Salvador': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 2, 1, 3, 3, 13, 6, 91, 326, 710, 664, 537, 371, 273, 436, 175, 234, 367, 356, 184, 500, 29, 0, 21, 9, 7, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]], 'United Kingdom': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 
2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [12, 81, 292, 189, 203, 194, 194, 140, 100, 239, 134, 142, 95, 177, 145, 67, 95, 117, 181, 163, 147, 262, 274, 0, 256, 22, 36, 78, 63, 76, 61, 94, 21, 23, 5, 29, 6, 20, 39, 23, 57, 47, 55, 137, 103, 114, 105, 122]], 'Turkey': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [12, 35, 9, 0, 1, 10, 35, 189, 52, 141, 95, 8, 5, 5, 19, 2, 7, 43, 42, 114, 195, 293, 514, 0, 300, 133, 54, 44, 23, 109, 35, 19, 5, 19, 27, 41, 43, 29, 32, 13, 20, 51, 188, 42, 94, 422, 542, 181]]};

const year_cnt_by_group = 
{'Taliban': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 4, 7, 50, 55, 120, 164, 208, 258, 268, 308, 214, 
800, 775, 1035, 1249, 1065, 894]], 'Islamic State of Iraq and the Levant (ISIL)': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 374, 1249, 1221, 1454, 1315]], 'Shining Path (SL)': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 25, 87, 249, 493, 502, 249, 391, 464, 277, 509, 371, 426, 286, 0, 74, 34, 23, 31, 3, 5, 2, 3, 1, 1, 2, 1, 1, 3, 0, 4, 0, 0, 5, 10, 9, 6, 2, 4]], 'Farabundo Marti National Liberation Front (FMLN)': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 159, 160, 284, 320, 254, 422, 174, 209, 351, 335, 181, 492, 8, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]], 'Al-Shabaab': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 26, 57, 72, 164, 236, 325, 871, 397, 564, 570]], "New People's Army (NPA)": [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [2, 1, 0, 0, 0, 0, 3, 2, 5, 13, 3, 12, 13, 7, 18, 84, 46, 118, 178, 106, 183, 96, 64, 0, 10, 2, 2, 4, 0, 6, 16, 9, 14, 19, 13, 9, 
18, 12, 86, 58, 55, 48, 86, 210, 289, 322, 172, 358]], 'Irish Republican Army (IRA)': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [7, 60, 162, 111, 113, 75, 93, 109, 88, 207, 94, 103, 56, 134, 118, 53, 45, 79, 133, 124, 107, 202, 184, 0, 147, 4, 12, 14, 12, 10, 6, 0, 2, 2, 0, 1, 2, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0]], 'Revolutionary Armed Forces of Colombia (FARC)': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 
2016, 2017], [0, 0, 0, 0, 0, 2, 3, 28, 27, 46, 38, 53, 64, 89, 54, 36, 32, 64, 58, 25, 30, 145, 54, 0, 39, 47, 70, 152, 43, 50, 67, 48, 111, 61, 26, 30, 33, 23, 89, 105, 120, 83, 85, 105, 163, 78, 11, 0]], 'Boko Haram': [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 17, 125, 424, 234, 495, 540, 240, 333]], "Kurdistan Workers' Party (PKK)": [[1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 1, 6, 22, 84, 122, 80, 361, 0, 182, 126, 22, 16, 11, 36, 4, 1, 0, 3, 10, 29, 16, 15, 25, 4, 15, 35, 140, 21, 65, 336, 363, 156]]};


const lineChart = new Chart(ctx2, {
    type: 'line',
    plugins: [ChartDataLabels],
    data: {
        labels: [1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017],
        datasets: [{
            data: [],
            backgroundColor: 'rgba(139, 0, 0, 0.7)',
            borderColor: 'darkred',
        }]
    },
    options: {
        //responsive: true,
        maintainAspectRatio: false,
        legend: {
            display: false,
        },
        scales: {
            yAxes: [{
                display: false,
                type: 'logarithmic',
                ticks: {
                    beginAtZero: true,
                },
            }],
            xAxes: [{
                gridLines: {
                    display: false,
                    drawBorder: false,
                },
                ticks: {
                    fontStyle: "bold",
                    fontColor: 'darkred',
                }
            }]
        },
        tooltips: {
            enabled: false
        },
        plugins: {
            datalabels: {
                color: 'darkred',
                labels: {
                    title: {
                        font: {
                            weight: 'bold'
                        }
                    },
                },
                align: 'top',
                anchor: 'end',
            }
        }
    }
});

const barChart = new Chart(ctx1, {
    // The type of chart we want to create
    type: 'bar',
    plugins: [ChartDataLabels],

    // The data for our dataset
    data: {
        // X-axis
        labels: [],
        datasets: [{
            backgroundColor: 'darkred',
            data: [],
        }]
    },

    // Configuration options go here
    options: {
        //responsive: false,
        maintainAspectRatio: false,
        legend: {
            display: false,
        },
        tooltips: {
            enabled: false
        },
        hover: {
            onHover: function(e, eles) {
                if (eles.length == 0) {
                    initLineChart();
                    return;
                }
                const idx = eles[0]._index;
                const key = activeBarChartSrc[2][idx];
                lineChart.data.datasets[0].data = activeLineChartSrc[key][1];
                lineChart.update();
            }
        },
        scales: {
            yAxes: [{
                display: false,
                ticks: {
                    beginAtZero: true,
                },
            }],
            xAxes: [{
                gridLines: {
                    display: false,
                    drawBorder: false,
                },
                ticks: {
                    fontStyle: "bold",
                    fontColor: 'darkred',
                }
            }]
        },
        plugins: {
            datalabels: {
                display: function(context) {
                    return context.active;
                },
                color: 'darkred',
                labels: {
                    title: {
                        font: {
                            weight: 'bold'
                        }
                    },
                },
                rotation: -90,
                align: 'top',
                anchor: 'end',
            }
        }
    }
});

let i = false;

function update() {
    toggle(i);
    i = !i;
}

let select_country = true;
let select_cnt = true;
let activeBarChartSrc = null;
let activeLineChartSrc = null;

function toggle(changeX) {
    if (changeX) {
        select_country = !select_country;
    } else {
        select_cnt = !select_cnt;
    }
    activeBarChartSrc = select_country ? (select_cnt ? country_cnt : country_death) : (select_cnt ? group_cnt : group_death);
    barChart.data.labels = activeBarChartSrc[0];
    barChart.data.datasets[0].data = activeBarChartSrc[1];
    barChart.options.scales.yAxes[0].ticks.max = Math.max(...activeBarChartSrc[1]) * 1.2;
    barChart.update();

    initLineChart();

    document.getElementById("country-group-btn1").innerHTML = select_cnt ? "Incident Count" : "Death Count";
    document.getElementById("country-group-btn2").innerHTML = select_country ? "By Country" : "By Terrorist Group";
}

function initLineChart() {
    activeLineChartSrc = select_country ? (select_cnt ? year_cnt_by_country : year_death_by_country) : (select_cnt ? year_cnt_by_group : year_death_by_group);
    lineChart.data.datasets[0].data = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
    lineChart.options.scales.yAxes[0].ticks.max = select_country ? (select_cnt ? 8000 : 30000) : (select_cnt ? 2000 : 17000);
    lineChart.update();
}


toggle(false);